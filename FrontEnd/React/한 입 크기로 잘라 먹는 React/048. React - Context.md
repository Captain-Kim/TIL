## Context란?

React의 상태를 관리하는 방법 중 하나.


나오게 된 이유는, 리액트에서 상태를 전달하는 특성 때문인데, 리액트에서 정의한 state는 부모->자식으로 전달이 가능하고 만약 부모->자식->자식 으로 손주까지 내려가려면 부모에서 바로 손주로 내려갈 수 없고 바로 위의 부모에 한 번 전달한 뒤 다시 그 바로 위 부모로부터 전달을 받아야 한다. 이런 현상을 `props drilling`이라 한다. 컴포넌트가 조금만 많아지더라도 매우 복잡하기 때문에 context가 생겼다.


context는 상태를 저장하는 보관소 느낌이다. 만들어 둔 상태들을 context에 저장해두고 필요한 곳에서 꺼내어 쓰면 되기 때문에 자식의 자식의 자식으로 타고타고 뚫고 들어가는 프롭스 드릴링을 하지 않아도 되어 편리하다.

## 기본 사용법

리액트 라이브러리로 제공하는 기능이기에 별도의 패키지 설치는 필요 없음

```jsx
// state를 저장할 context를 만들기 위해 훅을 import
import { createContext, useState } from 'react';

// 작명은 무관하나 파스칼 케이스로 Context를 생성
// 보통 상태명을 단수로 하고 그 뒤에 Context로 붙임
const MemberContext = createContext();

// 아래에 컴포넌트를 정의해도 되고
// 이 과정을 별도의 js/jsx 파일로 빼서 관리해도 됨.
// Provider 컴포넌트를 정의하고 상태를 관리함.
const MemberProvider = ({ children }) => {
  const [members, setMembers] = useState(['장원영', '안유진', '이서']);

  const addMember = (name) => {
    setMembers([...members, name]);
  };

  return (
    {/* 이 context를 전달받을 곳에 context컴포넌트명.Provider로 value 키를 통해 props를 내려주면 됨. */}
    <MemberContext.Provider value={{ members, addMembers }}>
      {children}
    </MemberContext.Provider>
  );
};

export { MemberContext, MemberProvider };
```

context를 갖다 쓰는 입장에서는 컨텍스트 컴포넌트를 import 하고 컴포넌트를 호출할 때 사용할 곳을 Provider 컴포넌트로 감싸주면 됨.

```jsx
// App.jsx
// 최상위 컴포넌트에서 Provider 컴포넌트를 사용할 곳을 감싸주기

import { MemberProvider } from './MemberContext';
function App() {
  return (
    <MemberProvider>
      <div>
        <h1>Member List</h1>
        <AddMember />
        <MemberList />
      </div>
    </MemberProvider>
  );
}

export default App;
```

이렇게 하면 `AddMember` 컴포넌트와 `MemberList` 컴포넌트는 `Provider` 컴포넌트로 감싸져 있기 때문에 `MemberProvider`에서 제공하는 데이터(state나 useEffect 등...)을 갖다 쓸 수 있음.


갖다 쓰는 방법은 아래와 같음.

```jsx
// 하위 컴포넌트

// context를 import하고
import { MemberContext } from './MemberContext';

// 갖다 쓰고 싶은 함수, 변수, state를 함수형 컴포넌트 내부에서 구조 분해 할당으로 가져오면 됨.
// 그러면 이후 props를 내리지 않아도 자유롭게 사용 가능.
const { addMember } = useContext(MemberContext);
```